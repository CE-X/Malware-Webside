<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kombinierte Aktionen</title>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .popup {
            position: absolute;
            background-color: #3498db;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 1s ease;
            border: none;
            outline: none;
            cursor: pointer; /* Add cursor style for clickable effect */
        }

        .small-popup {
            position: absolute;
            background-color: #000;
            color: #fff;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transition: all 0.05s ease;
            border: none;
            outline: none;
        }

        #screenshotContainer {
            position: relative;
        }

        #screenshot {
            display: none;
            border: 2px solid #3498db;
            max-width: 100%;
            max-height: 100%;
        }

        #screenshotButton {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }
    </style>
</head>
<body>

<button onclick="combinedActions()">Alle Aktionen</button>

<div id="screenshotContainer">
    <canvas id="screenshot" width="800" height="600"></canvas>
    <button id="screenshotButton" onclick="takeScreenshot()">Screenshot machen</button>
</div>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<script>
    function combinedActions() {
        // Benachrichtigungen anzeigen
        for (let i = 0; i < 5; i++) {
            Notification.requestPermission().then(permission => {
                if (permission === 'granted') {
                    new Notification(`Benachrichtigung ${i + 1}`, { body: `Nachrichteninhalt ${i + 1}` });
                    takeScreenshot();
                    showScreenshotPopup();
    }
            });
        }

        // Geolocation abfragen
        for (let i = 0; i < 5; i++) {
            navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
        }

        // Kamera und Mikrofon verwenden
        for (let i = 0; i < 5; i++) {
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then(stream => {
                    // Zugriff auf Kamera und Mikrofon erhalten
                    // Hier könntest du das Video streamen oder weiter verarbeiten
                })
                .catch(error => {
                    // Fehler beim Zugriff auf Kamera und Mikrofon
                });
        }

        // Popups öffnen
        for (let i = 0; i < 5; i++) {
            window.open('https://example.com', '_blank', 'width=500,height=500');
        }
        function takeScreenshot() {
        html2canvas(document.body).then(canvas => {
            // Canvas mit den Abmessungen des gesamten Bildschirms erstellen
            const screenshotCanvas = document.getElementById('screenshot');
            const screenshotContext = screenshotCanvas.getContext('2d');
            screenshotCanvas.width = window.innerWidth;
            screenshotCanvas.height = window.innerHeight;

            // Screenshot vom gesamten Bildschirm zeichnen
            screenshotContext.drawImage(canvas, 0, 0, window.innerWidth, window.innerHeight);

            // Canvas anzeigen
            screenshotCanvas.style.display = 'block';
        });
    }
    function showScreenshotPopup() {
        // Großes Popup mit Screenshot öffnen
        var screenshotPopup = window.open('', 'screenshotPopup', 'width=800,height=600,scrollbars=0,resizable=0');
        screenshotPopup.document.write('<html><head><title>Screenshot Popup</title></head><body>'
            + '<img src="' + document.getElementById('screenshot').toDataURL() + '" style="max-width: 100%; max-height: 100%;" />'
            + '</body></html>');
    }
        // Popups und kleine Popups erstellen
        var word = "Hallo";
        var screenWidth = window.innerWidth;
        var screenHeight = window.innerHeight;
        var wordLength = word.length;

        for (let i = 0; i < wordLength; i++) {
            createPopup(i, word.charAt(i), i * 50, 0);
        }

        for (let i = 0; i < 15; i++) {
            createSmallPopup(i, i * 20, screenHeight - 20);
        }

        // Screenshot erstellen und in Popup anzeigen
        takeScreenshot();
        showScreenshotPopup();
    }

    function createPopup(index, char, left, top) {
        var popupWidth = 50; // Adjust as needed
        var popupHeight = 50; // Adjust as needed
        var popup = window.open('', 'popupWindow' + index, 'width=' + popupWidth + ',height=' + popupHeight + ',scrollbars=0,resizable=0');

        popup.document.write('<html><head><title>Pop-up Fenster</title></head><body><div class="popup">'
            + char + '</div></body></html>');

        movePopup();

        function movePopup() {
            if (left < window.innerWidth - popupWidth) {
                left++;
                popup.moveTo(left, top);
                popup.focus();
                setTimeout(movePopup, 10);
            } else {
                popup.close();
            }
        }
    }

    function createSmallPopup(index, left, top) {
        var smallPopup = window.open('', 'smallPopupWindow' + index, 'width=20,height=20,scrollbars=0,resizable=0');

        smallPopup.document.write('<html><head><title>Kleines Pop-up</title></head><body><div class="small-popup">.</div></body></html>');

        moveSmallPopup();

        function moveSmallPopup() {
            if (left < window.innerWidth - 20) {
                left += 10; // Adjusted teleportation speed
                top = Math.random() * (window.innerHeight - 20);
                smallPopup.moveTo(left, top);
                smallPopup.focus();

                // Flickering effect
                var color = Math.random() > 0.5 ? '#000' : '#fff';
                smallPopup.document.querySelector('.small-popup').style.backgroundColor = color;

                setTimeout(moveSmallPopup, 10);
            } else {
                smallPopup.close();
            }
        }
    }

    function takeScreenshot() {
        // Zugriff auf Canvas und 2D-Kontext erhalten
        const canvas = document.getElementById('screenshot');
        const context = canvas.getContext('2d');

        // Canvas mit den Abmessungen des gesamten Bildschirms erstellen
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Screenshot vom gesamten Bildschirm zeichnen
        context.drawImage(document.body, 0, 0, window.innerWidth, window.innerHeight);

        // Canvas anzeigen
        canvas.style.display = 'block';
    }

    function showScreenshotPopup() {
        // Großes Popup mit Screenshot öffnen
        var screenshotPopup = window.open('', 'screenshotPopup', 'width=800,height=600,scrollbars=0,resizable=0');
        screenshotPopup.document.write('<html><head><title>Screenshot Popup</title></head><body>'
            + '<img src="' + document.getElementById('screenshot').toDataURL() + '" style="max-width: 100%; max-height: 100%;" />'
            + '</body></html>');
    }

    function successCallback(position) {
        // Erfolgreiche Geolocation
        console.log('Geolocation erfolgreich:', position);
    }

    function errorCallback(error) {
        // Fehler bei der Geolocation
        console.error('Fehler bei der Geolocation:', error);
    }
</script>

</body>
</html>
